<div class="content-area px-4 px-md-5 py-4 py-md-5">
  <div *ngIf="successMessage" class="alert alert-success text-center rounded-pill">
    {{ successMessage }}
  </div>
  <div *ngIf="errorMessage" class="alert alert-danger text-center rounded-pill">
    {{ errorMessage }}
  </div>

  <form [formGroup]="invoiceForm" (ngSubmit)="onSubmit()" class="bg-white shadow rounded-4 p-4 p-md-5 mx-auto" style="max-width: 1000px;">
    <h2 class="mb-4 fw-bold text-primary text-center">ðŸ§¾ Create Invoice</h2>

    <div class="row g-4 mb-3">
      <div class="col-md-6">
        <label class="form-label fw-semibold">Recipient Name</label>
        <input formControlName="recipientName" class="form-control rounded-pill shadow-sm" placeholder="Full Name" />
        <div *ngIf="invoiceForm.get('recipientName')?.touched && invoiceForm.get('recipientName')?.invalid" class="text-danger small mt-1">
          Recipient Name is required.
        </div>
      </div>

      <div class="col-md-6">
        <label class="form-label fw-semibold">Recipient Email</label>
        <input formControlName="recipientEmail" type="email" class="form-control rounded-pill shadow-sm" placeholder="example@mail.com" />
        <div *ngIf="invoiceForm.get('recipientEmail')?.touched && invoiceForm.get('recipientEmail')?.invalid" class="text-danger small mt-1">
          Enter a valid email.
        </div>
      </div>
    </div>

    <div class="mb-4">
      <label class="form-label fw-semibold">Description</label>
      <textarea formControlName="description" rows="2" class="form-control rounded shadow-sm" placeholder="Enter invoice description..."></textarea>
    </div>

    <div class="mb-5">
      <label class="form-label fw-semibold">Due Date</label>
      <input formControlName="dueDate" type="date" class="form-control rounded-pill shadow-sm" />
    </div>

    <h5 class="text-secondary mb-3 fw-semibold">Invoice Items</h5>

    <div formArrayName="items">
      <div *ngFor="let item of items.controls; let i = index" [formGroupName]="i" class="card mb-4 p-4 border-0 shadow-sm rounded-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h6 class="mb-0 fw-semibold text-primary">Item {{ i + 1 }}</h6>
          <button type="button" class="btn btn-outline-danger btn-sm d-flex align-items-center gap-1 px-3 rounded-pill" (click)="removeItem(i)" [disabled]="items.length === 1">
            <i class="bi bi-x-circle fs-5"></i> Remove
          </button>
        </div>

        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label fw-semibold">Description</label>
            <input formControlName="description" class="form-control rounded-pill shadow-sm" placeholder="e.g. Service charge" />
          </div>
          <div class="col-md-3">
            <label class="form-label fw-semibold">Quantity</label>
            <input formControlName="quantity" type="number" min="1" class="form-control rounded-pill shadow-sm" />
          </div>
          <div class="col-md-3">
            <label class="form-label fw-semibold">Unit Price</label>
            <input formControlName="unitPrice" type="number" step="0.01" min="0" class="form-control rounded-pill shadow-sm" />
          </div>
        </div>
      </div>
    </div>

    <div class="text-end mb-4">
      <button type="button" class="btn btn-outline-primary rounded-pill d-flex align-items-center gap-2 px-4" (click)="addItem()">
        <i class="bi bi-plus-circle fs-5"></i> Add Item
      </button>
    </div>

    <div class="text-center">
      <button type="submit" class="btn btn-success rounded-pill px-5 py-2 fw-semibold shadow" style="font-size: 1.1rem;">
        Submit Invoice
      </button>
    </div>
  </form>
</div>
